<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>自动获取定位</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h2>正在获取当前位置…</h2>
  <p>请确保手机已开启定位权限</p>

  <script>
    // 你的飞书表单链接
    const formURL = "https://zcnly53c9ptx.feishu.cn/share/base/form/shrcnPfXXYl5aEozWLPSFutDuBc";

    function goBackWithLocation(lat, lon) {
      // 拼接飞书回填参数
      const redirectURL = `${formURL}?经度=${lon}&纬度=${lat}`;
      window.location.href = redirectURL;
    }

    // 获取 GPS
    navigator.geolocation.getCurrentPosition(function(pos) {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        goBackWithLocation(lat, lon);
    }, function(err) {
        alert("无法获取定位，请检查权限并重试。\n错误：" + err.message);
    });
  </script>
</body>
</html>
